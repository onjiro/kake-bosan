<div class="container-fluid">
  <form id="entry-form" ng-submit="addNewTransaction()">
    <fieldset>
      <legend class="hidden-xs">▼ 登録</legend>

      <!-- トランザクションに1つ -->
      <!-- 取引時刻 -->
      <div class="row">
        <span class="col-sm-3">
          <span class="input-group">
            <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>
            <input name="date" class="form-control"
                   type="date" placeholder="日付"
                   ng-model="newTransaction.date"
                   autofocus />
          </span>
        </span>
      </div>

      <table class="table table-striped table-bordered">
        <thead class="hidden">
          <tr>
            <th>借方</th>
            <th class="hidden">借方金額</th>
            <th>貸方</th>
            <th>貸方金額</th>
          </tr>
        </thead>

        <tbody>
          <tr>

            <td class="debit-account" ng-controller="AccountSelectController">
              <div class="input-group">
                <div class="input-group-btn">
                  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="glyphicon glyphicon-filter"></i> <span class="caret"></span></button>
                  <ul class="dropdown-menu" role="menu">
                    <!-- repaet: filters -->
                    <li ng-repeat="filter in type_filters">
                      <a href="#">{{filter.title}}</a>
                    </li>
                  </ul>
                </div>
                <select name="debit-account" class="form-control"
                        ng-model="newTransaction.entries_attributes[0].item_id">
                  <option value="0">【借方】</option>
                  <option ng-repeat="item in items" value="{{ item.id }}">{{ item.name }}</option>
                </select>
              </div>
            </td>

            <td class="debit-amount">
              <div class="input-group">
                <div class="input-group-addon">&yen;</div>
                <input name="amount" class="form-control" style="text-align: right;"
                       type="number" placeholder="借方金額"
                       ng-model="newTransaction.entries_attributes[0].amount"
                       disabled>
                <div class="input-group-addon" title="金額自動転記">
                  <input type="checkbox" checked> <i class="glyphicon glyphicon-link"></i>
                </div>
              </div>
            </td>

            <td class="credit-account" ng-controller="AccountSelectController">
              <div class="input-group">
                <div class="input-group-btn">
                  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="glyphicon glyphicon-filter"></i> <span class="caret"></span></button>
                  <ul class="dropdown-menu" role="menu">
                    <!-- repaet: filters -->
                    <li ng-repeat="filter in type_filters">
                      <a href="#">{{filter.title}}</a>
                    </li>
                  </ul>
                </div>
                <select name="credit-account" class="form-control"
                        ng-model="newTransaction.entries_attributes[1].item_id">
                  <option value="0">【貸方】</option>
                  <option ng-repeat="item in items" value="{{ item.id }}">{{ item.name }}</option>
                </select>
              </div>
            </td>

            <td class="credit-amount">
              <div class="input-group">
                <div class="input-group-addon">&yen;</div>
                <input name="amount" class="form-control" style="text-align: right;"
                       type="number" placeholder="貸方金額"
                       ng-model="newTransaction.entries_attributes[1].amount"
                       ng-change="newTransaction.entries_attributes[0].amount = newTransaction.entries_attributes[1].amount"/>
              </div>
            </td>

            <!-- エントリーコントロール -->
            <td><button type="button" class="delete-row">x</button></td>
          </tr>

          <!-- トランザクションコントロール1 -->
          <tr>
            <td colspan="5" >
              <button class="btn btn-default col-sm-2">
                <i class="glyphicon glyphicon-plus"></i> 行を追加
              </button>
            </td>
          </tr>

        </tbody>
      </table>

      <!-- トランザクションコントロール2 -->
      <div id="entry-form-control" class="row">
        <div class="col-sm-12">
          <button class="btn btn-primary" type="submit"><i class="glyphicon glyphicon-pencil"></i> 登録 </button>
          <button ng-click="toggleEntryForm()" class="btn btn-default" type="button">クリア</button>
        </div>
      </div>

    </fieldset>
  </form>
</div>
